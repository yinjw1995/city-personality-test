<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸå¸‚æ€§æ ¼å›¾é‰´ - æµ‹æµ‹ä½ çš„ç²¾ç¥åŸä¹¡</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --bg: #fdfbfb;
            --text-main: #2d3436;
            --text-sub: #636e72;
        }

        body {
            font-family: 'PingFang SC', 'Helvetica Neue', sans-serif;
            background: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-main);
        }

        #app {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            width: 85%;
            max-width: 480px;
            padding: 40px 30px;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
            text-align: center;
            transition: all 0.4s ease;
        }

        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 { font-size: 1.6rem; margin-bottom: 10px; }
        .subtitle { color: var(--text-sub); font-size: 0.95rem; margin-bottom: 30px; line-height: 1.5; }

        .option-btn {
            display: block;
            width: 100%;
            padding: 16px 20px;
            margin: 12px 0;
            border: 2px solid #f1f2f6;
            border-radius: 16px;
            background: #fff;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            text-align: left;
            color: var(--text-main);
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
        }

        .option-btn:hover {
            border-color: var(--secondary);
            background-color: #f8faff;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(108, 92, 231, 0.1);
        }

        #progress-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            font-size: 0.85rem;
            color: var(--text-sub);
        }

        #progress-bar {
            flex-grow: 1;
            height: 8px;
            background: #f1f2f6;
            border-radius: 4px;
            margin: 0 15px;
            overflow: hidden;
        }

        #progress-inner {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ç»“æœé¡µä¸“å±æ ·å¼ */
        .result-tag { display: inline-block; padding: 5px 15px; background: #eef2ff; color: var(--primary); border-radius: 20px; font-size: 0.85rem; margin-bottom: 15px; font-weight: bold; }
        .city-name { font-size: 3rem; font-weight: 900; margin: 10px 0; background: linear-gradient(120deg, var(--primary), #e84393); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .city-desc { line-height: 1.8; color: var(--text-sub); text-align: justify; background: #f8f9fa; padding: 20px; border-radius: 16px; font-size: 0.95rem; margin-bottom: 20px; }
        
        .action-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 16px 40px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3);
            transition: transform 0.2s;
        }
        .action-btn:hover { transform: scale(1.05); }
    </style>
</head>
<body>

<div id="app" class="fade-in">
    <div id="start-screen">
        <h1>ğŸ§­ æµ‹æµ‹ä½ çš„â€œç²¾ç¥åŸä¹¡â€</h1>
        <p class="subtitle">äººçš„å‡ºç”Ÿåœ°æ˜¯éšæœºçš„<br>ä½†çµé­‚çš„å½’å±åœ°æ˜¯æœ‰è¿¹å¯å¾ªçš„ã€‚<br>6é“é¢˜ï¼Œæ’•ä¸‹ä¼ªè£…ï¼Œæ‰¾å¯»æœ€æ‡‚ä½ çš„åŸå¸‚ã€‚</p>
        <button class="action-btn" onclick="startTest()">å¼€å§‹åŒ¹é…</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="progress-container">
            <span id="step-current">1</span>
            <div id="progress-bar"><div id="progress-inner"></div></div>
            <span id="step-total">6</span>
        </div>
        <h3 id="question-text" style="text-align: left; margin-bottom: 20px; line-height: 1.4;">é—®é¢˜</h3>
        <div id="options-container"></div>
    </div>

    <div id="result-screen" class="hidden">
        <div class="result-tag" id="res-tag">åŒ¹é…å®Œæˆ</div>
        <div style="font-size: 1rem; color: var(--text-sub);">ä½ çµé­‚æ·±å¤„å…¶å®æ˜¯ä¸ª</div>
        <div class="city-name" id="res-city">åŸå¸‚</div>
        <div class="city-desc" id="res-desc">æè¿°</div>
        <button class="action-btn" onclick="location.reload()">å†æµ‹ä¸€æ¬¡</button>
    </div>
</div>

<script>
    // ç²¾å‡†åº¦æå‡çš„æ ¸å¿ƒï¼šé‡‡ç”¨å¤šç‚¹èµ‹æƒæœºåˆ¶ã€‚æ¯ä¸ªé€‰é¡¹ä¼šå½±å“å¤šä¸ªåŸå¸‚çš„å¾—åˆ†ã€‚
    const questions = [
        {
            q: "1. å‡è®¾å‘¨äº”æ™šä¸Šä¸ç”¨åŠ ç­ï¼Œä½ æœ€æƒ³é©¬ä¸Šåšçš„äº‹æƒ…æ˜¯ï¼Ÿ",
            options: [
                { t: "æ¢ä¸Šå…¨å¦†ï¼Œå†²å‘Livehouseæˆ–æœ€ç«çš„Bistroå–ä¸€æ¯", score: { Shanghai: 3, Changsha: 3, Chengdu: 1 } },
                { t: "ç»ˆäºæœ‰æ—¶é—´å»åƒé‚£å®¶ç§è‰å¾ˆä¹…çš„è‹è‡é¦†å­äº†ï¼", score: { Guangzhou: 3, Chongqing: 3, Chengdu: 2 } },
                { t: "å›å®¶æ´—ä¸ªçƒ­æ°´æ¾¡ï¼Œç‚¹ä¸ªå¤–å–ï¼Œèººå¹³åˆ·å‰§", score: { Hangzhou: 2, Shenzhen: 1, Beijing: 1 } },
                { t: "çº¦ä¸‰äº”å¥½å‹å»æ±Ÿè¾¹/æµ·è¾¹/æ¹–è¾¹å¹å¹é£æ•£æ­¥", score: { Xiamen: 3, Dali: 3, Hangzhou: 2 } }
            ]
        },
        {
            q: "2. åœ¨èŒåœºæˆ–ç”Ÿæ´»ä¸­é‡åˆ°â€œå·ç‹â€ï¼Œä½ çš„å†…å¿ƒOSæ˜¯ï¼š",
            options: [
                { t: "â€œè¦å·æ˜¯å§ï¼Ÿæ¥å•Šï¼Œçœ‹è°èƒ½æ‹¿å‡ºæ›´ä¸“ä¸šçš„æ–¹æ¡ˆã€‚â€", score: { Shenzhen: 3, Shanghai: 3, Beijing: 2 } },
                { t: "â€œä½ å·ä½ çš„ï¼Œæˆ‘åˆ°ç‚¹ä¸‹ç­ï¼Œç”Ÿæ´»æ‰æ˜¯è€å­çš„æœ¬ä½“ã€‚â€", score: { Chengdu: 3, Guangzhou: 2, Xiamen: 2 } },
                { t: "â€œæŒºå¥½ï¼Œè·Ÿç€ä»–ä¹Ÿè®¸èƒ½ææ³¢å¤§çš„ï¼Œå®ç°è´¢å¯Œè‡ªç”±ã€‚â€", score: { Hangzhou: 3, Shenzhen: 2, Shanghai: 1 } },
                { t: "â€œéšä»–å»å§ï¼Œæ ¼å±€æ‰“å¼€ï¼Œè¿™éƒ½ä¸ç®—äº‹å„¿ã€‚â€", score: { Beijing: 3, XiAn: 2, Harbin: 2 } }
            ]
        },
        {
            q: "3. ä½ è®¤ä¸ºâ€œæœ‰å“ä½çš„ç”Ÿæ´»â€å¿…é¡»åŒ…å«å“ªä¸€ç§å…ƒç´ ï¼Ÿ",
            options: [
                { t: "å’–å•¡é¦†ã€è‰ºæœ¯å±•ã€æ‡‚åˆ†å¯¸æ„Ÿçš„ç¤¾äº¤åœˆ", score: { Shanghai: 3, Hangzhou: 2 } },
                { t: "æ·±åšçš„å†å²åº•è•´ã€èƒ¡åŒå°å··é‡Œçš„äº¬å‘³/å¤é£", score: { Beijing: 3, XiAn: 3 } },
                { t: "çƒ­æ°”è…¾è…¾çš„å¸‚äº•æ°”ã€å“ªæ€•ç©¿ç€æ‹–é‹ä¹Ÿèƒ½åƒå¤§é¤", score: { Guangzhou: 3, Chongqing: 2, Changsha: 1 } },
                { t: "æ¨å¼€çª—å°±èƒ½çœ‹åˆ°è‡ªç„¶é£æ™¯ï¼Œæ²¡æœ‰é’¢ç­‹æ£®æ—çš„å‹è¿«æ„Ÿ", score: { Dali: 3, Xiamen: 3 } }
            ]
        },
        {
            q: "4. å¦‚æœè¦ç»™è‡ªå·±çš„æ€§æ ¼è´´ä¸€ä¸ªæ ‡ç­¾ï¼Œä½ è§‰å¾—å“ªä¸ªæœ€å‡†ï¼Ÿ",
            options: [
                { t: "ç›´æ¥å¦è¡ï¼Œé‡æƒ…é‡ä¹‰ï¼Œä¸å–œæ¬¢å¼¯å¼¯ç»•ç»•", score: { Harbin: 3, Chongqing: 3, Beijing: 2 } },
                { t: "åŠ¡å®ä½è°ƒï¼Œé—·å£°å‘å¤§è´¢ï¼Œä¸çˆ±è™šè£", score: { Guangzhou: 3, Shenzhen: 2 } },
                { t: "è¾¹ç•Œæ„Ÿå¼ºï¼Œå¥‘çº¦ç²¾ç¥ï¼Œä½“é¢è‡³ä¸Š", score: { Shanghai: 3, Hangzhou: 1 } },
                { t: "åŒ…å®¹éšæ€§ï¼Œä¹è§‚å¼€æœ—ï¼Œå¤©ç”Ÿçš„äº«ä¹æ´¾", score: { Chengdu: 3, Changsha: 3, Dali: 1 } }
            ]
        },
        {
            q: "5. ä¹°ä¸œè¥¿æ—¶ï¼Œä½ çš„æ¶ˆè´¹è§‚æ›´åå‘äºï¼Ÿ",
            options: [
                { t: "ä¸ºæƒ…ç»ªä»·å€¼å’Œæœ€æ–°ç§‘æŠ€ä¹°å•ï¼Œè´µç‚¹æ— æ‰€è°“", score: { Hangzhou: 3, Shenzhen: 2, Shanghai: 2 } },
                { t: "æå…¶æ³¨é‡æ€§ä»·æ¯”ï¼Œå¥½åƒ/å¥½ç”¨æ‰æ˜¯ç¡¬é“ç†", score: { Guangzhou: 3, Chengdu: 2 } },
                { t: "åƒé‡‘éš¾ä¹°æˆ‘ä¹æ„ï¼Œçœ‹å¿ƒæƒ…ï¼Œä¸ºçˆ±å¥½ç–¯ç‹‚æ°ªé‡‘", score: { Changsha: 3, Chongqing: 2, Beijing: 1 } },
                { t: "æç®€ä¸»ä¹‰ï¼Œç‰©è´¨æ¬²ä¸é«˜ï¼Œå¤Ÿç”¨å°±è¡Œ", score: { Dali: 3, Xiamen: 2, XiAn: 1 } }
            ]
        },
        {
            q: "6. å½“ä½ æ„Ÿåˆ°éå¸¸ç„¦è™‘å’Œå†…è€—æ—¶ï¼Œå“ªç§åœºæ™¯æœ€èƒ½æ²»æ„ˆä½ ï¼Ÿ",
            options: [
                { t: "çœ‹å¡é‡Œä½™é¢ä¸Šæ¶¨ï¼Œæˆ–è€…æå®šä¸€ä¸ªå¤§é¡¹ç›®", score: { Shenzhen: 4, Shanghai: 2, Hangzhou: 2 } },
                { t: "å‡Œæ™¨çš„çƒ§çƒ¤æ‘Šï¼Œå’Œæœ‹å‹ç—›é¥®åæ§½", score: { Harbin: 3, Changsha: 3, Chongqing: 3 } },
                { t: "ä¸€ä¸ªäººå»çœ‹æµ·ï¼Œæˆ–è€…å»å±±é‡Œå‘ä¸ªå‘†", score: { Xiamen: 4, Dali: 3 } },
                { t: "é€›èœå¸‚åœºï¼Œçœ‹ç€ç³ç…æ»¡ç›®çš„é£Ÿæ", score: { Guangzhou: 3, Chengdu: 3 } }
            ]
        }
    ];

    const results = {
        Shanghai: { name: "ä¸Šæµ·", tag: "ä½“é¢ä¸è¾¹ç•Œçš„å®ˆå«è€…", desc: "ä½ æ˜¯å…¸å‹çš„â€œé«˜èƒ½ä½è€—â€äººæ ¼ã€‚ä½ æåº¦çƒ­çˆ±ç§©åºæ„Ÿã€è¾¹ç•Œæ„Ÿå’Œå¥‘çº¦ç²¾ç¥ã€‚åœ¨ä½ çš„ä¸–ç•Œé‡Œï¼Œç”Ÿæ´»å“è´¨å’Œä¸“ä¸šä¸»ä¹‰æ˜¯ä¸å¯å¦¥åçš„åº•çº¿ï¼Œæ¯”èµ·æ¯«æ— è¾¹ç•Œçš„çƒ­æƒ…ï¼Œä½ æ›´å–œæ¬¢æ¢§æ¡æ ‘ä¸‹é‚£ä»½æ°åˆ°å¥½å¤„çš„ä½“é¢ä¸è·ç¦»ã€‚" },
        Beijing: { name: "åŒ—äº¬", tag: "å®è§‚å™äº‹ä¸‹çš„é‡è‰", desc: "ä½ èº«ä¸Šæœ‰ä¸€ç§â€œæ··ä¸åâ€çš„å¦è¡å’Œè±è¾¾çš„è‹±é›„ä¸»ä¹‰ã€‚ä½ æ ¼å±€å®å¤§ï¼Œä¸æ‹˜å°èŠ‚ï¼Œæ—¢èƒ½åœ¨é«˜å‹ä¸‹è°ˆç¬‘é£ç”Ÿï¼Œä¹Ÿèƒ½åœ¨èƒ¡åŒé‡Œæ‰¾å¯»çƒŸç«ã€‚ä½ çš„çµé­‚æ˜¯ç¡¬æ ¸çš„ï¼ŒåŒ…å®¹ä¸‡è±¡ï¼Œä¸å±‘äºæ— èŠçš„æ”€æ¯”ã€‚" },
        Guangzhou: { name: "å¹¿å·", tag: "é—·å£°å‘å¤§è´¢çš„åŠ¡å®æ´¾", desc: "ä½ æ·±è°™â€œä½è°ƒæ‰æ˜¯æœ€é«˜çº§çš„ç‚«è€€â€ã€‚ä½ æ‹’ç»ç²¾ç¥å†…è€—ï¼Œæ´»å¾—æå…¶æ¸…é†’ä¸”åŠ¡å®ã€‚å¯¹ä½ æ¥è¯´ï¼Œç©¿æ‹–é‹åƒç±³å…¶æ—æ˜¯å¸¸æ€ï¼Œæ¯”èµ·å…‰é²œäº®ä¸½çš„PPTï¼Œä½ æ›´å…³å¿ƒä»Šæ™šçš„é“æ±¤ç‚–å¾—å¤Ÿä¸å¤Ÿç«å€™ã€‚" },
        Shenzhen: { name: "æ·±åœ³", tag: "ä¸çŸ¥ç–²å€¦çš„é½¿è½®", desc: "ä½ å¤©ç”Ÿå¸¦ç€â€œæé’±â€å’Œâ€œæ•ˆç‡â€çš„DNAã€‚ä½ æå…·æ‰§è¡ŒåŠ›ï¼Œæ‹¥æŠ±å˜åŒ–ï¼Œæ…•å¼ºä¸”æ…•ç†ã€‚ä½ ç›¸ä¿¡è§„åˆ™å’ŒåŠªåŠ›çš„åŠ›é‡ï¼Œæ¯”èµ·ç¼…æ€€è¿‡å»ï¼Œä½ æ°¸è¿œåœ¨å‘å¾€ä¸‹ä¸€ä¸ªé£å£ã€‚æé’±ï¼Œæ‰æ˜¯æ²»æ„ˆä¸€åˆ‡çŸ«æƒ…çš„è‰¯è¯ã€‚" },
        Chengdu: { name: "æˆéƒ½", tag: "åå†…å·å…ˆé”‹", desc: "ä½ å½»åº•æŒæ¡äº†äººç”Ÿçš„ç»ˆæå¥¥ä¹‰â€”â€”â€œæ¾å¼›æ„Ÿâ€ã€‚åœ¨å¤§å®¶éƒ½åœ¨ç„¦è™‘ç‹‚å¥”çš„æ—¶å€™ï¼Œä½ æ€»èƒ½ç²¾å‡†æ‰¾åˆ°æœ€èˆ’æœçš„é‚£ä¸ªèººæ¤…ã€‚ä½ åŒ…å®¹ã€ä¹è§‚ï¼Œèƒ½ç”¨ä¸€é¡¿ç«é”…åŒ–è§£æ‰€æœ‰ä¸å¿«ï¼Œç”Ÿæ´»æœ¬èº«æ‰æ˜¯ä½ æœ€åœ¨ä¹çš„ä½œå“ã€‚" },
        Chongqing: { name: "é‡åº†", tag: "èµ›åšæœ‹å…‹çš„è€¿ç›´é­‚", desc: "ä½ çš„çµé­‚æ˜¯ç«‹ä½“çš„ã€é­”å¹»çš„ã€çƒ­çƒˆä¸”ç›´ç™½çš„ï¼ä½ çˆ±æ†åˆ†æ˜ï¼Œæ€§å­æé‡ï¼Œæœ‰ç€æ±Ÿæ¹–å„¿å¥³çš„ä»—ä¹‰ã€‚ä½ ä¸å–œæ¬¢å¼¯å¼¯ç»•ç»•ï¼Œæœ‰ä»€ä¹ˆäº‹å½“é¢é”£å¯¹é¢é¼“åœ°è¯´æ¸…æ¥šã€‚ä½ ç”Ÿå‘½åŠ›æå¼ºï¼Œåƒè¿™åº§åŸå¸‚çš„ç«é”…ä¸€æ ·çƒ­è¾£æ»šçƒ«ã€‚" },
        Changsha: { name: "é•¿æ²™", tag: "æ°¸ä¸å¤œçš„å¼„æ½®å„¿", desc: "ä½ æ˜¯ä¸€ä¸ªå……æ»¡èƒ½é‡çš„â€œå¤šå·´èƒºâ€å‘ç”µæœºï¼ä½ å®³æ€•å¹³åº¸å’Œå¯‚é™ï¼Œæ¶ˆè´¹è§‚å‰å«ï¼Œäº«å—å½“ä¸‹ã€‚å“ªé‡Œæœ‰çƒ­é—¹ã€ç¾é£Ÿå’Œæ½®æµï¼Œå“ªé‡Œå°±æ˜¯ä½ çš„ä¸»åœºã€‚å¯¹ä½ æ¥è¯´ï¼Œäººç”Ÿè‹¦çŸ­ï¼Œå¿…é¡»æ€§æ„Ÿï¼Œå¿«ä¹è¦è¶æ—©ã€‚" },
        Hangzhou: { name: "æ­å·", tag: "ç§‘æŠ€ä¸æµªæ¼«çš„å¹³è¡¡è€…", desc: "ä½ æ˜¯ç†æ€§ä¸æ„Ÿæ€§çš„å®Œç¾ç»“åˆã€‚ä½ æ—¢æ¸´æœ›åœ¨äº’è”ç½‘çš„æµªæ½®ä¸­è¯æ˜è‡ªå·±ï¼Œåˆä¿ç•™äº†ä¸€ä»½æ–‡äººçš„å„’é›…å’Œå¯¹ç”Ÿæ´»å“è´¨çš„è¿½æ±‚ã€‚ä½ æ˜¯ä¸ªè¿›é˜¶çš„é•¿æœŸä¸»ä¹‰è€…ï¼Œèƒ½åœ¨æ•ˆç‡ä¸è¯—æ„ä¹‹é—´æ‰¾åˆ°å¾®å¦™çš„å¹³è¡¡ã€‚" },
        Xiamen: { name: "å¦é—¨", tag: "æ–‡è‰ºæµªæ¼«çš„å²›å±¿", desc: "ä½ çš„çµé­‚é‡Œè—ç€ä¸€ç‰‡æµ·ã€‚ä½ åŒæ¶å¿«èŠ‚å¥çš„å‹è¿«ï¼Œå‘å¾€æ¸©æŸ”ã€ç¼“æ…¢ã€æµªæ¼«çš„ç”Ÿæ´»æ­¥è°ƒã€‚ä½ æ•æ„Ÿä¸”å¯Œæœ‰åŒç†å¿ƒï¼Œæç®€ä¸”æ–‡è‰ºã€‚æ¯”èµ·åœ¨å†…å·ä¸­å®æ€ï¼Œä½ æ›´æ„¿æ„åœ¨æµ·é£ä¸­æ‰¾å¯»å†…å¿ƒçš„å¹³é™ã€‚" },
        XiAn: { name: "è¥¿å®‰", tag: "åšé‡æ·±æ²‰çš„æ—¶å…‰å®¢", desc: "ä½ æ˜¯ä¸ªæå…¶æœ‰â€œæ•…äº‹æ„Ÿâ€å’Œåº•è•´çš„äººã€‚ä½ æ²‰ç¨³ã€åšé‡ï¼Œä¸éšæ³¢é€æµï¼Œå¯¹å†å²å’Œæ–‡åŒ–æœ‰ç€å¤©ç„¶çš„äº²è¿‘æ„Ÿã€‚ä½ çš„æ€§æ ¼å¦‚åŒåŸå¢™èˆ¬åšå›ºï¼Œæœ‰ç€å¼ºå¤§çš„å†…æ ¸å’Œæ–‡åŒ–è‡ªä¿¡ã€‚" },
        Dali: { name: "å¤§ç†", tag: "ç²¾ç¥ç¦»èŒçš„è‰ºæœ¯å®¶", desc: "ä½ æ˜¯ä¸€ä¸ªå½»åº•çš„â€œè‡ªç”±ä¸»ä¹‰è€…â€ã€‚ä½ å¯¹ä¸–ä¿—çš„æˆåŠŸæ ‡å‡†å—¤ä¹‹ä»¥é¼»ï¼Œåªåœ¨ä¹å†…å¿ƒçš„æ„Ÿå—ã€‚ä½ å¯èƒ½ä¸€ç›´å¤„äºâ€œç²¾ç¥ç¦»èŒâ€çš„çŠ¶æ€ï¼Œé£èŠ±é›ªæœˆã€è‡ªç„¶å±±æ°´æ‰æ˜¯ä½ çµé­‚çœŸæ­£çš„å……ç”µç«™ã€‚" },
        Harbin: { name: "å“ˆå°”æ»¨", tag: "å†°é›ªé‡Œçš„çƒ­è¡€æ²¸è…¾", desc: "ä½ æœ‰ç€å†°å†·çš„é“ ç”²å’Œæå…¶ç«çƒ­çš„å†…å¿ƒã€‚ä½ çœŸè¯šã€ç›´æ¥ã€å¤§æ°”ï¼Œæ˜¯äº¤æœ‹å‹çš„ç»ä½³äººé€‰ã€‚ä½ ä¸æ‡‚ä»€ä¹ˆæ˜¯è™šæƒ…å‡æ„ï¼Œè®¤å‡†äº†è°å°±ä¼šæå¿ƒæè‚ºã€‚ä½ çš„ç›´çˆ½æ˜¯è¿™åº§åŸå¸‚æœ€è¿·äººçš„é£é›ªã€‚" }
    };

    let currentStep = 0;
    let totalScores = {};

    document.getElementById('step-total').innerText = questions.length;

    function startTest() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        document.getElementById('quiz-screen').classList.add('fade-in');
        showQuestion();
    }

    function showQuestion() {
        // é‡ç½®åŠ¨ç”»
        const quizScreen = document.getElementById('quiz-screen');
        quizScreen.style.animation = 'none';
        quizScreen.offsetHeight; // è§¦å‘å›æµ
        quizScreen.style.animation = null;

        const qData = questions[currentStep];
        document.getElementById('question-text').innerText = qData.q;
        document.getElementById('step-current').innerText = currentStep + 1;
        
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        
        qData.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt.t;
            // ç®€å•çš„é˜²è¿ç‚¹é€»è¾‘
            btn.onclick = function() {
                this.style.transform = "scale(0.98)";
                setTimeout(() => handleAnswer(opt.score), 150);
            };
            container.appendChild(btn);
        });

        const progress = ((currentStep) / questions.length) * 100;
        document.getElementById('progress-inner').style.width = progress + '%';
    }

    function handleAnswer(scoreObj) {
        // æ ¸å¿ƒç»Ÿåˆ†é€»è¾‘ï¼šéå†è¯¥é€‰é¡¹èµ‹åˆ†çš„åŸå¸‚ï¼Œç´¯åŠ åˆ°æ€»åˆ†è¡¨
        for (let city in scoreObj) {
            totalScores[city] = (totalScores[city] || 0) + scoreObj[city];
        }

        currentStep++;
        if (currentStep < questions.length) {
            showQuestion();
        } else {
            // å¡«æ»¡è¿›åº¦æ¡åå†è·³è½¬
            document.getElementById('progress-inner').style.width = '100%';
            setTimeout(showResult, 400);
        }
    }

    function showResult() {
        document.getElementById('quiz-screen').classList.add('hidden');
        const resultScreen = document.getElementById('result-screen');
        resultScreen.classList.remove('hidden');
        resultScreen.classList.add('fade-in');

        // æ ¸å¿ƒåŒ¹é…é€»è¾‘ï¼šæ‰¾å‡ºå¾—åˆ†æœ€é«˜çš„åŸå¸‚
        let topCityKey = null;
        let maxScore = -1;

        for (let city in totalScores) {
            if (totalScores[city] > maxScore) {
                maxScore = totalScores[city];
                topCityKey = city;
            }
        }
        
        // ä¿åº•é€»è¾‘ï¼ˆé˜²æ­¢å‡ºç°å…¨æ˜¯0çš„æƒ…å†µï¼‰
        if (!topCityKey) topCityKey = "Chengdu"; 

        const finalCity = results[topCityKey];
        
        document.getElementById('res-tag').innerText = "âœ¨ " + finalCity.tag;
        document.getElementById('res-city').innerText = finalCity.name;
        document.getElementById('res-desc').innerText = finalCity.desc;
    }
</script>

</body>
</html>
